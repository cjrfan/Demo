<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>查找替换、替换全部</title>
	<style>
		p{
			width: 400px;
			padding: 20px;
			border: 10px solid #ddd;
			background-color: lightgoldenrodyellow;
		}
		span{
			background-color: yellow;
		}
	</style>
</head>
<body>
	<input id="val1" type="text">
	<input id="val2" type="text">
	<input id="replace" type="button" value="替换">
	<input id="replaceAll" type="button" value="替换全部">
	<p id="p1">今天讲一种PDF和网页备份两者结合保存备份的方式，这种方式较以上方式或其它方式更加完美，因为PDF的图片无法完美导出，而网页保存的方式可以直接将所有图片导出，两者结合起来备份几乎完美。目前来看，我认为网页打印PDF保存网页直接保存是目前最便捷也是最好的方式之一，肯定有更完美的方式，但对大多数人来说，这更便捷。</p>
	<!-- 浅复制和深复制都可以实现在已有对象的基础上再生一份的作用，但是对象的实例是存储在堆内存中然后通过一个引用值去操作对象，由此复制的时候就存在两种情况了：复制引用和复制实例，这也是浅复制和深复制的区别所在。浅复制：浅复制是复制引用，复制后的引用都是指向同一个对象的实例，彼此之间的操作会互相影响。深复制：深复制不是简单的复制引用，而是在堆中重新分配内存，并且把源对象实例的所有属性都进行新建复制，以保证深复制的对象的引用图不包含任何原有对象或对象图上的任何对象，复制后的对象与原来的对象是完全隔离的
 -->
	<script>
	var oVal1 = document.getElementById("val1");
	var oVal2 = document.getElementById("val2");
	var oBtn = document.getElementById("replace");
	var oBtn2 = document.getElementById("replaceAll");
	var oP1 = document.getElementById("p1");
	

	oBtn2.onclick = function(){
		var str = oP1.innerHTML;
		if (oVal2.value==""||oVal1.value=="") {
			alert("请输入完整的信息");
		}else{
			// console.log(str.split(oVal1.value));
			if (str.indexOf(oVal1.value)>-1) {
				oP1.innerHTML = str.split(oVal1.value).join("<span>"+oVal2.value+"</span>");
				
				/*console.log(str.indexOf(oVal1.value));
				console.log(oVal1.value.length);
				console.log(oVal2.value);
				var arr = [1,2,3,4,5,6,7,8,9];
				console.log(arr.splice(0, 4, 11,22));
				console.log(arr);*/

			}else{
				alert("找不到对应的内容");
			}
			// str = oP1.innerHTML;
		}
	}
	oBtn.onclick = function(){
		var str = oP1.innerHTML;
		if (oVal2.value==""||oVal1.value=="") {
			alert("请输入完整的信息");
		}else{
			if (str.indexOf(oVal1.value)>-1) {
				// .subStr(indexOf(oVal1.value))
				var subStr = str.indexOf(oVal1.value)+oVal1.value.length;
				var str2 = str.substring(0, subStr);
				var str3 = str.substring(subStr);
				str2 = str2.split(oVal1.value).join("<span>"+oVal2.value+"</span>");
				oP1.innerHTML = str2+str3;

				// console.log(str2);
				
				/*var arr1 = str.split('');
				var newArr = arr1.splice(str.indexOf(oVal1.value), oVal1.value.length, '<span>'+oVal2.value+'</span>');
				oP1.innerHTML = arr1.join('');*/
			}else{
				alert("找不到对应的内容");
			}
		}
	}
	</script>
</body>
</html>